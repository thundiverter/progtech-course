<h2>–°–ø–∏—Å–æ–∫ –∑–∞–Ω—è—Ç–∏–π<button class="primary" onclick="toggleDialog()">+ –î–æ–±–∞–≤–∏—Ç—å</button></h2>
<table>
    <tr>
        <th>‚Ññ</th>
        <th>–ì—Ä—É–ø–ø–∞</th>
        <th>–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞</th>
        <th>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</th>
        <th>–í—Ä–µ–º—è</th>
        <th></th>
    </tr>

    <% for (let d of data[0]) { %>
    <tr>
        <td><span class="table-counter"></span></td>
        <td><%= d.group_title %></td>
        <td><%= d.subject_title %><br><span class="gray"><%= ['–õ–µ–∫—Ü–∏—è', '–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–Ω—è—Ç–∏–µ', '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞'][d.type] %></span></td>
        <td><%= d.teacher_last %> <%= d.teacher_first %> <%= d.teacher_middle %></td>
        <td><%= ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å'][d.dayOfWeek - 1] %>, <%= ["8:30 ‚àí 9:50", "10:05 ‚àí 11:25", "11:40 ‚àí 13:00", "13:45 ‚àí 15:05", "15:20 ‚àí 16:40", "16:55 ‚àí 18:15", "18:30 ‚àí 19:50", "20:00 ‚àí 21:20"][d.pair - 1] %><br><span class="gray"><%= d.pair %> –ø–∞—Ä–∞</span></td>
        <td><form action="/timetable/delete" method="post">
            <input type="text" hidden value="<%= d.id %>" name="id">
            <button type="submit" title="–£–¥–∞–ª–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ">üóëÔ∏è</button>
        </form></td>
    </tr>
    <% } %>
</table>

<div id="dialog-wrapper">
    <div class="dialog">
        <h3>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ</h3>
        <form action="/timetable/add" method="post" id="addTimetableForm">

            <p>
                <label for="group">–ó–∞–Ω—è—Ç–∏–µ (–¥–ª—è –≥—Ä—É–ø–ø—ã)</label>
                <select name="group" id="group" required>
                    <% for (let gc of data[1]) { %>
                        <option value="<%= gc.id %>"><%= gc.group_title %> ¬∑ <%= gc.subject_title %> ¬∑ <%= ['–õ–µ–∫—Ü–∏—è', '–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–Ω—è—Ç–∏–µ', '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞'][gc.type] %></option>
                    <% } %>
                </select>
            </p>

            <p>
                <label for="teacher">–ó–∞–Ω—è—Ç–∏–µ (–¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è)</label>
                <select name="teacher" id="teacher" required>
                    <% for (let tc of data[2]) { %>
                        <option value="<%= tc.id %>"><%= tc.teacher_last %> <%= tc.teacher_first %> <%= tc.teacher_middle %> ¬∑ <%= tc.subject_title %></option>
                    <% } %>
                </select>
            </p>

            <p>
                <label for="dayOfWeek">–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏</label>
                <select name="dayOfWeek" id="dayOfWeek" required>
                    <option value="1">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</option>
                    <option value="2">–í—Ç–æ—Ä–Ω–∏–∫</option>
                    <option value="3">–°—Ä–µ–¥–∞</option>
                    <option value="4">–ß–µ—Ç–≤–µ—Ä–≥</option>
                    <option value="5">–ü—è—Ç–Ω–∏—Ü–∞</option>
                    <option value="6">–°—É–±–±–æ—Ç–∞</option>
                    <option value="7">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ</option>
                </select>
            </p>

            <p>
                <label for="pair">–ü–∞—Ä–∞</label>
                <select name="pair" id="pair" required>
                    <option value="1">1 –ø–∞—Ä–∞ (8:30 ‚àí 9:50)</option>
                    <option value="2">2 –ø–∞—Ä–∞ (10:05 ‚àí 11:25)</option>
                    <option value="3">3 –ø–∞—Ä–∞ (11:40 ‚àí 13:00)</option>
                    <option value="4">4 –ø–∞—Ä–∞ (13:45 ‚àí 15:05)</option>
                    <option value="5">5 –ø–∞—Ä–∞ (15:20 ‚àí 16:40)</option>
                    <option value="6">6 –ø–∞—Ä–∞ (16:55 ‚àí 18:15)</option>
                    <option value="7">7 –ø–∞—Ä–∞ (18:30 ‚àí 19:50)</option>
                    <option value="8">8 –ø–∞—Ä–∞ (20:00 ‚àí 21:20)</option>
                </select>
            </p>

            <button type="submit" class="primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button type="reset" onclick="toggleDialog()">–û—Ç–º–µ–Ω–∞</button>
        </form>
    </div>
</div>

<!--<script>
    const form = document.querySelector('#addTimetableForm');
    const classGroups = data[1];
    const classTeachers = data[2];
    console.log(classGroups);
    console.log(classTeachers);
    form.group.addEventListener('change', () => {
        form.teacher.innerHTML = '';
        for (let tc of classTeachers) {
            if (tc.subject_id == classGroups[form.teacher.value].subject_id) {
                form.teacher.innerHTML += `<option>${tc.subject_title}</option>`;
            }
        }
    })
</script>-->