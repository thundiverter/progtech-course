<h2>–°–ø–∏—Å–æ–∫ –∑–∞–Ω—è—Ç–∏–π<button class="primary" onclick="toggleDialog()">+ –î–æ–±–∞–≤–∏—Ç—å</button></h2>
<div class="card warning" id="errorExists"><p>–¢–∞–∫–æ–µ –∑–∞–Ω—è—Ç–∏–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç</p></div>
<table>
    <tr>
        <th>‚Ññ</th>
        <th style="width: 50%;">–§–ò–û –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</th>
        <th style="width: 50%;">–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞</th>
        <th></th>
    </tr>

    <% for (let d of data[0]) { %>
    <tr>
        <td><span class="table-counter"></span></td>
        <td><%= data[1].find((s) => s.id == d.teacherID)?.last_name %> <%= data[1].find((s) => s.id == d.teacherID)?.first_name %> <%= data[1].find((s) => s.id == d.teacherID)?.middle_name || '' %></td>
        <td><%= data[2].find((s) => s.id == d.subjectID)?.title %></td>
        <td><form action="/classes-teachers/delete" method="post">
            <input type="text" hidden value="<%= d.id %>" name="id">
            <button type="submit" title="–£–¥–∞–ª–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ">üóëÔ∏è</button>
        </form></td>
    </tr>
    <% } %>
</table>

<div id="dialog-wrapper">
    <div class="dialog">
        <h3>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ</h3>
        <form action="/classes-teachers/add" method="post">
            <p>
                <label for="teacher">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</label>
                <select name="teacher" id="teacher">
                    <% for (let teacher of data[1]) { %>
                        <option value="<%= teacher.id %>"><%= teacher.last_name %> <%= teacher.first_name %> <%= teacher?.middle_name || '' %></option>
                    <% } %>
                </select>
            </p>
            <p>
                <label for="subject">–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞</label>
                <select name="subject" id="subject">
                    <% for (let subject of data[2]) { %>
                        <option value="<%= subject.id %>"><%= subject.title %></option>
                    <% } %>
                </select>
            </p>
            <button type="submit" class="primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button type="reset" onclick="toggleDialog()">–û—Ç–º–µ–Ω–∞</button>
        </form>
    </div>
</div>

<script>
    const errorExists = document.querySelector('#errorExists');
    const urlParams = new URLSearchParams(window.location.search);
    errorExists.style.display = 'none';
    if (urlParams.get('error') == 'duplicate') {
        errorExists.style.display = 'flex';
    }
</script>